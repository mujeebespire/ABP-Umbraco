@inherits UmbracoViewPage<BlockListItem>
@using Umbraco.Cms.Core.Models
@using Umbraco.Cms.Core.Models.Blocks
@using Umbraco.Extensions
@using ABP.Web.Models.UmbracoModels

@{
    var content = Model.Content as BannerWithImage;
    if (content == null) { return; }

    var heading = content.Value<string>("heading");
    var title = content.Value<string>("title");
    var image = content.Value<MediaWithCrops>("image");
    var imageUrl = image?.Url() ?? "";
    var iconclass = content.Value<string>("iconClass");

    var cta = content.Value<Link>("cta");

    // ✅ Overlay toggle (true means show overlay version)
    var overlay = content.Value<bool>("overlay");

}

@if (overlay)
{
    <!-- 🧊 Overlay banner version -->
    <div class="banner banner--small banner--overlay" style="background-image: url('@imageUrl');">
        <div class="banner__container">

                <span class="banner__icon icon font-ico-@iconclass"></span>


            @if (!string.IsNullOrWhiteSpace(heading))
            {
                <span class="banner__subtitle">@heading</span>
            }

            @if (!string.IsNullOrWhiteSpace(title))
            {
                <h1 class="banner__title banner__title--">@title</h1>
            }
        </div>
    </div>
}
else
{
    <!-- 🌄 Regular full-image banner -->
    <div class="full-image has-cover" style="background-image:url('@imageUrl');">
        <div class="wrap">
            <div class="full-image__content">
                @if (!string.IsNullOrWhiteSpace(heading))
                {
                    <h3 class="full-image__title">@heading</h3>
                }

                @if (!string.IsNullOrWhiteSpace(title))
                {
                    <p class="full-image__text">@title</p>
                }

                @if (cta != null && !string.IsNullOrWhiteSpace(cta.Url))
                {
                    <a href="@cta.Url" target="@cta.Target" class="btn btn--transparent full-image__btn">
                        @cta.Name
                    </a>
                }
            </div>
        </div>
    </div>
}
